---
import TitleDetail from '../../layouts/TitleDetail.astro';
import { urlForImage } from '../../sanity/urlForImage';
import type { Actions } from '../../utils/sanity';
import PortableText from '../PortableText/PortableText.astro';

interface Props {
actions: Actions;
}

const { actions } = Astro.props;
---

<TitleDetail title='Methodology' sectionClass=`col-span-3 ${actions.actions.length > 3 ? 'md:grid md:grid-cols-2 md:gap-12' : 'space-y-16'}``>
    {actions.actions.map((action) => (
        <div class="flex flex-col space-y-8">
            {/* Image Block */}
            <div data-aos="fade-in">
                <img src={urlForImage(action.image).url()} 
                class="w-full max-h-[60vh] object-cover bg-gray-800 rounded-lg mb-8 md:mb-0" 
                />
            </div>

            {/* Text Block */}
            <div data-aos="fade-in"
                 class="text-lg leading-relaxed space-y-4">
                <h2 class="text-xl">{action.heading}</h2>
                <div class={`space-y-4 ${actions.actions.length > 3 ? '' : 'portable-text-columns'}`}>
                    <PortableText portableText={action.content} />
                </div>
            </div>
        </div>
    ))}
</TitleDetail>
