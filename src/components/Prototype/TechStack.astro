---
import { urlForImage } from '../../sanity/urlForImage';
import type { TechStack } from '../../utils/sanity';
import PortableText from '../PortableText/PortableText.astro';

interface Props {
stack: TechStack;
}

const { stack } = Astro.props;
---

<section class="flex flex-col items-center space-y-16">
    <h1 class="text-4xl" data-aos="fade-in">The stack</h1>

    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
        {stack.tools.map((tool, index) => (
            <div class="grid grid-cols-1 lg:grid-cols-4 text-center space-y-8 lg:space-y-0 md:space-x-4">
                <div class="flex flex-col items-center">
                    {index !== 0 && <img src="/arrow.down.svg" class="h-24 block lg:hidden" data-aos="fade-down" />}
                    {index !== 0 && <img src="/arrow.right.svg" class="h-24 hidden lg:block" data-aos="fade-right" data-aos-delay={`${index % 3 * 100}`} />}
                </div>
        
                <div class="flex flex-col items-center col-span-3 space-y-4">
                    <img src={urlForImage(tool.icon).url()} class="h-32 pb-4" data-aos="fade-in" data-aos-delay={`${index % 3 * 200}`}>
                    <h3 class="text-2xl" data-aos="fade-up" data-aos-delay={`${index % 3 * 200}`}>{tool.name}</h3>
                    <div class="text-lg" data-aos="fade-up" data-aos-delay={`${index % 3 * 200}`}>
                        <PortableText portableText={tool.detail} />
                    </div>
                </div>
            </div>
        ))}
    </div>
</section>
